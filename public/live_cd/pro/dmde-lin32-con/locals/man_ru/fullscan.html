<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>DMDE - Полное сканирование</title>
<link rel="stylesheet" href="dmdeman.css" type='text/css' />
</head>
<body>
<a name="fullscan"></a>
<div id="bklayer">
<div id="wrapper">
<a href="toc.html">Содержание</a> &middot; <a href="howto.html">Работа</a> &middot; 
<a href="menu.html">Меню</a> &middot; <a href="menu_tools.html">Сервис</a>
<hr />
<h2>Полное сканирование</h2>
<p>
<a href="#raw">Raw-поиск файлов</a> 
&nbsp;
</p>
<p>
Специальный алгоритм поиска позволяет найти и виртуально 
реконструировать структуру директорий и файлов повреждённой файловой системы
либо найти потерянные файлы известных типов по сигнатурам, если невозможно использовать файловую систему.
</p>
<p>
Если файловая система тома повреждена незначительно, то том может быть открыт до завершения сканирования.
При выборе тома можно ориентироваться на индикаторы качества и другие параметры 
(подробности&nbsp;- <a href="#columns">ниже</a>).
</p>
<p>
Перед работой со специальными типами хранилищ 
(RAID-массивы&nbsp;/ тома c чередованием, зашифрованные хранилища, образы дисков)
обратитесь к <a href="openvolume.html#open_sstor">соответствующим инструкциям</a>
(в разделе <a href="openvolume.html">Открыть том</a>),
иначе Полное сканирование даст некорректные результаты поиска по ФС,
если запускать его просто на отдельных исходных дисках.

В случае с обычным разделом рекомендуется <a href="devices.html">открывать физический диск</a> 
и сканировать на нем всю область, которую мог занимать раздел (включая возможные старые и новые области),
вместо попытки работать с поврежденным логическим диском.
При необходимости сканирование может выходить за пределы выбранной области.
</p>
<p>
При сканировании <b>могут быть обнаружены различные варианты одного тома</b>,
которые нужны <b>только</b> в наиболее сложных случаях 
(прерванное преобразование ФС: перемещение&nbsp;/ слияние&nbsp;/ разделение&nbsp;/ изменение размера раздела&nbsp;/ кластера,
или составной том).
В таких случаях одна часть файлов может быть корректно восстанавлена в одном из вариантов тома, 
а другая часть - в другом, хотя файлы могут быть видны одновременно в обоих вариантах тома.

Откройте выбранный вариант как том и <a href="datarecovery.html">восстановите файлы</a>. 
Если файлы отсутствуют или восстанавливаются некорректно, 
следует продолжить поиск или попробовать другой вариант.
</p>
<p>
</p>

<table><tr>
<th class="ii">Открыть&nbsp;том</th><td>Открыть том, выделенный в списке.</td></tr>
<tr><th class="ii">Сохранить...</th><td>Сохранить результаты сканирования файл.</td></tr>
<tr><th class="ii">Загрузить...</th><td>Загрузить результаты из файла
(можно продолжить сканирование после остановки или открыть сохранённые результаты).
</td></tr>
<tr><th class="ii">Старт/Стоп</th><td>Приостановить/продолжить поиск. 
Если настройки сбора данных и область поиска не изменены, сканирование будет продолжено.
</td></tr>
<tr><th class="ii">Параметры</th><td>
Выбор области поиска, ФС, параметров сбора данных и расчёта томов.
<span class="ii">Непоследовательное сканирование</span>
используется при необходимости быстрее найти основные результаты по всему диску, 
не дожидаясь завершения сканирования.
<div class="spec" style="border:none">
Непоследовательное сканирование проводится выборочно сразу по всему диску 
с постепенным покрытием всей области сканирования.
В первую очередь обнаруживаются тома с большим количеством файлов.
</div>
</td></tr>
<tr><th class="ii">Лог-файл</th><td>
Опции для автосохранения состояния и результатов поиска в файл
</td></tr>
<tr><th class="ii">Меню</th><td>В том числе, позволяет изменить сортировку томов.
</td></tr>
</table>

<p>Столбцы <b class="ii">%</b> и <b class="ii">Соответствия</b> позволяют предварительно 
оценить качество восстановления данных для найденного варианта тома.

Для <b>NTFS, exFAT, HFS</b> рассчитываются процент и количество правильных 
соответствий между структрами ФС и файлами, найденными по <a href="#raw">сигнатурам</a>,
для остальных ФС рассчитываются соответствия только для структур ФС.
</p>

<p><b class="ii">Мин. размер</b> - минимальная оценка объема, занятого файлами тома 
(учитываются только наилучшие найденные фрагменты ФС).
</p>

<p>
Колонка <b class="ii">Индикаторы</b>
показывает отсутствие (или повреждение) ("<b class="ii">-</b>")
или наличие ("<b class="ii">+</b>") соответствующих структур ФС

(<b class="ii">B/C</b> - бутсектор/копия; для <b>FAT</b>: <b class="ii">F</b> - таблица FAT/копия, 
<b class="ii">R</b>&nbsp;- корневая директория).
</p>

<h3 id="raw">Raw-поиск файлов по сигнатурам</h3>
<p>
Сигнатуры файлов используются как последнее средство для поиска потерянных файлов, 
когда невозможно использовать результаты поиска по ФС (выше). 
Кроме того, они используются для улучшения и оценки качества результатов <b>NTFS, exFAT, HFS</b>.
Они также используются для маркировки и фильтрации файлов, 
найденных как по файловой системе, так и по сигнатурам, 
то есть файлов с высокой вероятностью восстановления 
(см. <a href="filepanel.html#fileicons">значки на панели файлов</a>).
</p>
<p>
Результаты Raw доступны внутри директории <span class="ii">$Raw</span> в <a href="filepanel.html">панели файлов</a>
после открытия любого тома.
Чтобы исключить результаты, найденные по файловой системе открытого тома,
используется символическая директория <span class="ii">$Raw - фильтровать результаты Raw</span>
(для определения и исключения пространства, занятого файлами,
используются функции <a href="clustermap.html">карты кластеров</a>). 
</p>
<p>
Обычно нет смысла открывать отдельно результаты Raw-поиска, если есть результаты для файловых систем.
Восстановление Raw возможно только для файлов, которые имеют специальные сигнатуры 
(например, в целом не работает для простых текстовых файлов).
Восстановление по сигнатурам не работает корректно с фрагментированными файлами 
(правильно восстанавливается только первый фрагмент). При Raw-поиске не восстанавливаются 
исходные имена файлов и структура директорий, 
также не всегда правильно определяются исходные размеры файлов,
возможно получение лишних результатов, не являющихся файлами нужного типа, 
если сигнатура не является достаточно уникальной.
Если файл определенного типа не имеет ни сигнатуры конца, ни встроенную информацию о размере, 
то начало следующего файла считается концом предыдущего,
поэтому поиск всех присутствующих на диске типов позволяет точнее определить размеры.
</p>
<p>
Для некоторых встроенных типов файлов последовательные фрагменты могут быть объединены в один файл,
поэтому число файлов в панели файлов может быть меньше, чем в результатах сканирования.
</p>
<p>
<span class="ii">Raw: Сигнатуры файлов</span>: выбор типов файлов для поиска, добавление новых сигнатур.
</p>

<h4>Сигнатуры файлов</h4>
<p>Сигнатура файла - фиксированная последовательность байтов в начале файла определённого типа. 
Например, при открытии любого PDF-файла в <a href="diskeditor.html">шестнадцатеричном редакторе</a> 
можно увидеть одну и ту же последовательность первых 4 байт:
<div class="spec" style="font-family:monospace">
0000: &nbsp; <span style="color:blue">25 50 44 46</span> 2D 31 2E 33&nbsp; 0A ... &nbsp; &nbsp; &nbsp;  <span style="color:blue">%PDF</span>-1.3...
</div>
В этом случае в DMDE можно задать <span class="ii">сигнатуру</span> строкой <span class="tt">%PDF</span>
(или <span class="tt">\x25\x50\x44\x46</span> с использованием шестнадцатеричных кодов). 
Для указания произвольного байта используется знак вопроса (<span class="tt">?</span>).
Код <span class="tt">\mXY</span> обозначает фиксированную битовую маску предыдущего байта сигнатуры, 
где <span class="tt">XY</span> - шестнадцатеричное значение маски 
(например, код <span class="tt">\x05\m07</span> указывает, что
маской <span class="tt">7 = 00000<span style="text-decoration:underline">111</span> (bin)</span>
фиксированы только три младших бита значения 
<span class="tt">5 = 00000<span style="text-decoration:underline">101</span> (bin)</span>).
</p>
<p>
Если позиция сигнатуры в файле не фиксирована, необходимо указать минимальное и максимально возможное смещение от начала файла.
Сигнатура должна целиком умещаться в первые 4096 байта.
</p>

<h4 id="raw_add">Добавление новых типов файлов</h4>
<p>
Помимо уже встроенных типов файлов и соответствующих сигнатур
возможно добавление новых типов пользователем 
(только если данные типы имеют уникальные сигнатуры): 
Полное сканирование (Параметры) - <span class="ii">Raw: Сигнатуры файлов</span>&nbsp;-
<span class="ii">Добавить</span>.
</p>
<p>
В несложных случаях можно автоматически определить сигнатуру нового типа на основе файлов-образцов.
Для этого следует нажать на кнопку "<span class="ii">...</span>" и указать 
допустимые расширения файлов (через запятую) и место, где расположены исправные файлы требуемого типа.
Если восстановление производится с камеры, для получения образцов можно снять на новый носитель
различные фото/видео той же камерой в том же формате.
</p>
<p>
Кнопка <span class="ii">Тест</span> позволяет проверить наличие и правильность сигнатуры на конкретном файле.
</p>
<div class="spec">
Опция <span class="ii">использовать для расчета ФС</span>
включает проверку соответствий между структурами ФС и файлами, наденными по сигнатуре.
Кроме того, файлы внутри ФС будут отмечены в <a href="filepanel.html#fileicons">Файловой панели</a>
как найденные также по сигнатуре (или не найденные).
<br />
<p>
Могут быть заданы несколько разделённых запятыми <span class="ii">Расширений</span> для расчёта FS.<br />
Можно пометить тип как <span class="ii">надёжный</span>, если сигнатура содержит по крайней мере 
4 различных байта с фиксированным смещением 
(в ином случае помечать не следует, чтобы из-за ложных срабатываний не были обрезаны другие файлы).<br />
<span class="ii">Файл-контейнер</span> может содержать другие типы файлов внутри себя
(следует пометить, чтобы файл не был обрезан при обнаружении файлов другого типа).<br />
<span class="ii">Сигнатура EOF</span> - необязательная сигнатура конца файла.
</p>
</div>

</div></div>
</body>
</html>