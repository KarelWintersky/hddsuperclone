<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>DMDE - Массивы RAID</title>
<link rel="stylesheet" href="dmdeman.css" type='text/css' />
</head>
<body>
<a name="raids"></a>
<div id="bklayer">
<div id="wrapper">
<a href="toc.html">Содержание</a> &middot; <a href="howto.html">Работа</a> &middot; 
<a href="menu.html">Меню</a> &middot; <a href="menu_disk.html">Диск</a>
<hr />
<h2>Массивы RAID</h2>
<h3>Диалог "Собрать RAID"</h3>
<p>Меню - Диск - <b>Выбрать диск</b> - пункт "Собрать RAID"</p>
<p>
Инструмент для сборки виртуальных массивов RAID из одиночных дисков (или разделов и образов) в случаях,
когда RAID не может быть собран средствами контроллера (аппаратный RAID)
или операционной системы (программный RAID), а также для автоматического определения
конфигурации в случае, если некоторые параметры массива неизвестны.
</p>
<p>
При необходимости диски должны быть отсоединены от RAID-контроллера и подключены к компьютеру как одиночные диски.
</p>
<p>
Неправильный выбор типа массива, чередования или порядка дисков приводит 
к некорректному <a href="datarecovery.html">восстановлению данных</a>
(даже если структура директорий реконструируется правильно).
</p>
<p>
Опция <span class="ii">RAID: авторасчет (сканирование)</span> позволяет вычислять неизвестные параметры 
и&nbsp;/ или порядок дисков для массивов с чередованием. 
Некоторые диски могут отсутствовать (однако, исходное количество дисков должно быть указано точно).
В процессе сканирования статистически рассчитываются наиболее вероятные конфигурации RAID. 
Чем более точно указаны возможные параметры RAID, тем быстрее и точнее результаты. 
Например, программная реализация RAID-5 в ОС Windows использует чередование backward dynamic и размер страйпа 64 КиБ, 
таким образом данные параметры можно задать до сканирования.
</p>
<p>
В большинстве программных реализаций RAID используются контейнеры, 
<span class="ii">шаг смещения (LBA)</span> используется для проверки различных смещений контейнера. 
Современные ОС используют выравнивание 1MiB, поэтому по умолчанию используется шаг 2048 LBA (1MiB). 
Старые ОС могут использовать выравнивание по 63 LBA. 
Для полностью неизвестного смещения можно указать шаг <span class="tt">1</span> LBA.
</p>

<h3>Типы массивов</h3>

<p><b>RAID-0.</b> Массив обычно содержит два диска, информация на которых записывается 
поочерёдно блоками (stripe) указанного размера. 
Без одного из дисков могут быть восстановить только небольшие файлы, полностью уместившиеся в одном блоке. 
</p>

<p><b>RAID-1.</b> 
Массив обычно содержит два диска, данные дублируются. Размер блока не используется. 
Поддерживается только чтение. Один полностью здоровый диск может быть <a href="devices.html">открыт</a>
как одиночное устройство без потери данных.
</p>

<p><b>RAID-4.</b> 
Массив обычно содержит три диска. Один из дисков содержит данные контроля чётности. 
Данные поочерёдно записываются блоками на остальные диски.
Без одного из дисков массива данные могут быть польностью восстановлены. 
Вместо отсутствующего диска следует использовать <span class="ii">Пустой диск</span>.
</p>

<p><b>RAID-5.</b> 
Массив обычно содержит три диска (или больше). Данные чередуются блоками между всеми дисками
с одним блоком контроля чётности на остальные блоки данных.
По способу чередования данных массивы <b>RAID-5</b> делятся на четыре основных вида.
На некоторых массивах (обычно аппаратных) блоки чётности могут чередоваться реже блоков данных
(delayed parity). 
Данные могут быть полностью восстановлены без одного из дисков (который следует заменить на <span class="ii">Пустой диск</span>). 
</p>

<p><b>RAID-6.</b> 
Массив обычно содержит четыре диска (или больше). Подобен массиву <b>RAID-5</b>, 
но для контроля чётности используются два блока (разных типов).
В программе поддерживает только один тип контроля чётности, поэтому только один диск может быть заменён 
<span class="ii">Пустым диском</span>. Поддерживается только чтение.
</p>

<p><b>RAID: <span class="ii">Custom rotation</span>.</b> 
Можно задать произвольное <span class="ii">чередование</span> данных (<span class="ii">Mеню</span> - <span class="ii">Чередование...</span>).
Целые числа от <span class="tt">0</span> определяют блоки данных согласно их порядку на дисках, 
<span class="tt">-1</span> определяет блок чётности <b>XOR</b>,
<span class="tt">-2</span> определяет неиспользуемый блок.
</p>

<table>
<tr><td colspan="4">Например, для диаграммы:</td>
  <td rowspan="6" style="vertical-align:middle">=&gt;</td><td>чередование указывается матрицей:</td></tr>
<tr><td>Диск#0</td><td>Диск#1</td><td>Диск#2</td><td>Диск#3</td><td></td></tr>

<tr><td>A1</td><td>A2</td><td>Ap</td><td>Aq</td>
  <td class="tt">&nbsp;0 &nbsp;1       -1      -2 </td></tr>

<tr><td>B1</td><td>Bp</td><td>Bq</td><td>B2</td>
  <td class="tt">&nbsp;2      -1       -2 &nbsp;3 </td></tr>

<tr><td>Cp</td><td>Cq</td><td>C1</td><td>C2</td>
  <td class="tt">     -1      -2  &nbsp;4 &nbsp;5 </td></tr>

<tr><td>Dq</td><td>D1</td><td>D2</td><td>Dp</td>
  <td class="tt">-2 &nbsp;6  &nbsp;7      -1 </td></tr>
</table>


<p><b>JBOD/Spanned.</b> 
Набор из нескольких дисков, используемых последовательно. 
Данные не чередуются, размер блока не используется. 
Данные, расположенные на любом из дисков, будут потеряны, если диск отсутствует.
Поддерживается чтение и запись.
</p>

<h3>Параметры массивов</h3>

<p>
<span class="ii">Размер блока</span>: размер блока при чередовании данных. Не используется в <b>RAID-1</b>, <b>JBOD</b>.
<br />
<span class="ii">Delay</span>: задержка [чередования], используется только в <b>RAID-5/6</b> с "delayed parity".
<br />
<span class="ii">Смещение</span>: смещение начала данных на диске (обычно используется в программных массивах RAID).
<br />
<span class="ii">Смещение и размер</span>: смещение и размер элемента массива на отдельном диске.
<br />
<span class="ii">Пустой диск (NULL)</span>: используeтся вместо отсутствующего или повреждённого диска.
<br />
<span class="ii">Чередование...</span>: ручное задание чередования блоков данных (<b>Custom rotation</b>).
<br />
<span class="ii">Сохранить/Загрузить</span>: созранить/загрузить конфигурацию массива RAID
<br />
<span class="ii">Упреждающее чтение</span>: повысить производительность на массиве с маленьким размером страйпа
(не рекомендуется на дисках с плохими секторами).
</p>

</div></div>
</body>
</html>